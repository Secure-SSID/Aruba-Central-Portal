# ğŸ§™ Setup Wizard - User Guide

## âœ¨ **No More Manual .env File Editing!**

The Setup Wizard allows you to configure your Aruba Central credentials directly through the UI - no need to edit files manually!

---

## ğŸ“‹ **How It Works**

### **Automatic Detection:**
- When you first start the portal, it checks if credentials are configured
- If **NOT configured** â†’ Setup Wizard appears
- If **configured** â†’ Login page appears

### **Setup Flow:**

```
Start Portal
    â†“
Credentials Check
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Not Configured â”‚  â”€â”€â”€â”€â†’  â”‚ Setup Wizard â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
                           Enter Credentials
                                  â†“
                           Save to .env
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Configured   â”‚  â”€â”€â”€â”€â†’  â”‚  Login Page  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ **Using the Setup Wizard**

### **Step 1: Welcome Screen**

When you open the portal for the first time, you'll see:

- **Welcome message**
- **What you'll need** checklist:
  - âœ… Client ID
  - âœ… Client Secret
  - âœ… Customer ID
- **How to get credentials** guide
- **Direct links** to HPE GreenLake

**Click "Get Started"** to continue

---

### **Step 2: Getting Your Credentials**

Before continuing, you need API credentials from Aruba Central:

#### **For New Central (HPE GreenLake):**

1. **Log into HPE GreenLake:**
   - Go to: https://common.cloud.hpe.com
   - Or your specific Aruba Central URL

2. **Navigate to API Gateway:**
   - Click your **profile icon** (top right)
   - Go to **Manage Account** or **Account Home**
   - Click **API Gateway**
   - Click **System Apps & Tokens**

3. **Create API Credentials:**
   - Click **"Create"** or **"+ Add"**
   - **App Name**: `Aruba-Central-Portal` (or any name)
   - **Type**: Select **"Service Account"** or **"API Client"**
   - Click **Create**

4. **Copy These Values** (shown only once!):
   - âœ… **Client ID**: Long string (abc123def456...)
   - âœ… **Client Secret**: Long string (xyz789uvw456...)
   - âœ… **Customer ID**: Your tenant ID (a1b2c3d4...)

   âš ï¸ **IMPORTANT**: Client Secret is shown **only once**! Copy it now!

---

### **Step 3: Enter Credentials in Setup Wizard**

Back in the Setup Wizard:

1. **Select Your Region:**
   - Choose from dropdown:
     - **United States (New Central)** â† Most common
     - **Europe (New Central)**
     - **Asia Pacific (New Central)**
     - **US Classic Central** (if using legacy)

2. **Paste Your Credentials:**
   - **Client ID**: Paste the value you copied
   - **Client Secret**: Paste the secret (you can show/hide)
   - **Customer ID**: Paste your customer/tenant ID

3. **Click "Next"**

---

### **Step 4: Review & Save**

The wizard shows a summary of your settings:

- Region / Base URL
- Client ID (first 20 chars)
- Client Secret (masked)
- Customer ID (first 20 chars)

**Click "Save & Continue"**

What happens next:
1. âœ… Credentials saved to `.env` file
2. âœ… Aruba Central client initialized
3. âœ… Page reloads automatically
4. âœ… Login page appears

---

## ğŸ¯ **What Gets Created**

When you save credentials, the wizard creates a `.env` file:

```bash
# Aruba Central API Configuration (New Central / HPE GreenLake)
# Generated by Setup Wizard

# Aruba Central API Base URL
ARUBA_BASE_URL=https://internal.api.central.arubanetworks.com

# OAuth2 Credentials
ARUBA_CLIENT_ID=abc123def456ghi789jkl012mno345
ARUBA_CLIENT_SECRET=xyz789uvw456rst123opq789lmn456
ARUBA_CUSTOMER_ID=a1b2c3d4e5f6g7h8i9j0
```

**Location**: `/home/user/Aruba-Central-Portal/.env`

---

## ğŸŒ **Regional Clusters Explained**

Choose the correct region based on your Aruba Central dashboard URL:

| Your Dashboard URL | Region to Select | Base URL |
|-------------------|------------------|----------|
| `common.cloud.hpe.com` | **United States (New Central)** | `https://internal.api.central.arubanetworks.com` |
| `common-eu.cloud.hpe.com` | **Europe (New Central)** | `https://internal-eu.api.central.arubanetworks.com` |
| `common-apac.cloud.hpe.com` | **Asia Pacific (New Central)** | `https://internal-apac.api.central.arubanetworks.com` |
| `app.central.arubanetworks.com` | **US Classic Central** | `https://apigw-prod2.central.arubanetworks.com` |

âš ï¸ **Important**: Using the wrong region will cause authentication failures!

---

## âœ… **After Setup**

Once setup is complete:

1. **Login page appears**
2. Click **"Connect to Aruba Central"**
3. Backend authenticates with your credentials
4. You're in! ğŸ‰

---

## ğŸ”„ **Changing Credentials Later**

If you need to change credentials:

### **Option 1: Use Settings Page**
- Go to **Settings** â†’ **Workspace Management**
- Click **"Switch Workspace"**
- Enter new credentials
- Click **"Switch"**

### **Option 2: Delete .env and Restart**
```bash
rm .env
# Restart backend and frontend
# Setup Wizard will appear again
```

### **Option 3: Edit .env Manually**
```bash
nano .env
# Edit the credentials
# Restart backend to reload
```

---

## ğŸ› **Troubleshooting**

### **Setup Wizard Not Appearing:**
- Check if `.env` file exists
- If exists, delete it and refresh browser

### **"Authentication Failed" After Setup:**
Possible causes:
1. **Wrong credentials** - Double-check Client ID, Secret, Customer ID
2. **Wrong region** - Verify your Aruba Central dashboard URL
3. **Expired credentials** - Regenerate in Aruba Central
4. **Typo in credentials** - Check for extra spaces or missing chars

**Solution**: Delete `.env` and run Setup Wizard again

### **"Failed to Initialize Client":**
- Backend can't connect to Aruba Central
- Check:
  - âœ… Internet connection
  - âœ… Correct base URL for your region
  - âœ… Credentials are valid (test in Aruba Central)

---

## ğŸ“š **Backend API Endpoints**

The Setup Wizard uses these endpoints:

```bash
# Check if setup is needed
GET /api/setup/check
Response: {
  "configured": false,
  "needs_setup": true
}

# Save credentials
POST /api/setup/configure
Body: {
  "client_id": "abc123...",
  "client_secret": "xyz789...",
  "customer_id": "a1b2c3...",
  "base_url": "https://internal.api.central.arubanetworks.com"
}
Response: {
  "success": true,
  "message": "Credentials configured successfully!",
  "configured": true
}
```

---

## ğŸ¨ **UI Features**

### **Region Dropdown:**
- Shows all available regions
- Includes description for each
- Auto-selects New Central US by default

### **Client Secret Field:**
- Show/Hide toggle (eye icon)
- Masked by default for security
- Can reveal to verify input

### **Validation:**
- All fields required
- "Next" button disabled until filled
- Real-time error messages

### **Help Text:**
- Instructions on every screen
- Links to official documentation
- Example values shown

---

## ğŸ’¡ **Tips**

1. **Keep credentials safe**: Never share your Client Secret
2. **Copy correctly**: No extra spaces or line breaks
3. **Right region**: Check your Central dashboard URL first
4. **Test first**: Create a test API app in Central before production
5. **Regenerate if lost**: Client Secret can be regenerated in Central

---

## ğŸ” **Security Notes**

- Credentials are stored in `.env` file on the server
- **Never committed to git** (`.env` is in `.gitignore`)
- Only backend has access to credentials
- Frontend never sees Client Secret after initial save
- SSL/HTTPS recommended for production deployments

---

## âœ¨ **Benefits of Setup Wizard**

âœ… **User-friendly** - No technical knowledge required
âœ… **No file editing** - Everything through UI
âœ… **Guided process** - Step-by-step instructions
âœ… **Region selector** - Prevents common errors
âœ… **Validation** - Catches mistakes before saving
âœ… **Automatic initialization** - Works immediately after save
âœ… **One-time setup** - Only appears when needed
âœ… **Help included** - Direct links to docs

---

## ğŸ‰ **You're All Set!**

The Setup Wizard makes it **easy for anyone** to configure the Aruba Central Portal, no technical skills required!

**Questions?** Check the main documentation: `PORTAL_FEATURES_COMPLETE.md`
